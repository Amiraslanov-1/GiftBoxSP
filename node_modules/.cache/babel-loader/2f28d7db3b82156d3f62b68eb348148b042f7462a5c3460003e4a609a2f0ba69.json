{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmira\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\e-commerce-react-app-main\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Footernavbar from '../components/Footernavbar';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { auth } from '../firebase';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Profile() {\n  _s();\n  const [authUser, setAuthUser] = useState(null);\n  const [orders, setOrders] = useState(null);\n  useEffect(() => {\n    const listen = onAuthStateChanged(auth, user => {\n      // console.log(user.email) //check token status\n      if (user) {\n        setAuthUser(user);\n      } else {\n        setAuthUser(null);\n        window.location.href = \"/login\";\n      }\n    });\n    return () => {\n      listen();\n    };\n  }, []);\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_FIREBASE_DATABASE_URL}/orders.json`);\n        let resData = await response.json();\n        let arr = [];\n        for (const key in resData) {\n          if (resData[key].orderOwnerEmail == authUser.email) {\n            arr.unshift({\n              ...resData[key],\n              id: key\n            });\n          }\n        }\n        console.log(\"red\");\n        setOrders(arr);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getData();\n  }, [authUser]);\n  const userSignOut = () => {\n    signOut(auth).then(() => {\n      console.log(\"Sigin Out Successfully\");\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profilepage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header bg-secondary\",\n      children: \"My Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profilecontainer\",\n      children: [authUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imgprofile shadow\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/icons/profile.svg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"email\",\n          children: authUser.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/profile/orders\",\n        className: \"itembox mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"My Orders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1\",\n            children: [\"Alredy have \", orders ? orders.length : 0, \" orders\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"to\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/icons/chevron_right.svg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/profile/settings\",\n        className: \"itembox mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1\",\n            children: \"Password, Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"to\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/icons/chevron_right.svg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), authUser ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary mt-3 mb-5\",\n        onClick: userSignOut,\n        children: \"Sign Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 22\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footernavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"JEfzwBGj7G2MZeu5dUgRYyMEf2I=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","Footernavbar","onAuthStateChanged","signOut","auth","Link","jsxDEV","_jsxDEV","Profile","_s","authUser","setAuthUser","orders","setOrders","listen","user","window","location","href","getData","response","fetch","process","env","REACT_APP_FIREBASE_DATABASE_URL","resData","json","arr","key","orderOwnerEmail","email","unshift","id","console","log","error","userSignOut","then","catch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","to","length","onClick","_c","$RefreshReg$"],"sources":["C:/Users/xmira/OneDrive/Рабочий стол/e-commerce-react-app-main/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Footernavbar from '../components/Footernavbar'\nimport { onAuthStateChanged, signOut } from 'firebase/auth'\nimport { auth } from '../firebase'\nimport { Link } from 'react-router-dom'\n\nfunction Profile() {\n  const [authUser, setAuthUser] = useState(null)\n  const [orders, setOrders] = useState(null)\n  useEffect(() => {\n    const listen = onAuthStateChanged(auth, (user) => {\n      // console.log(user.email) //check token status\n      if (user) {\n        setAuthUser(user)\n      } else {\n        setAuthUser(null)\n        window.location.href = \"/login\"\n      }\n    })\n    return () => {\n      listen()\n    }\n  }, [])\n  useEffect(()=>{\n    const getData = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_FIREBASE_DATABASE_URL}/orders.json`)\n        let resData = await response.json()\n        let arr = []\n        for (const key in resData) {\n          if (resData[key].orderOwnerEmail == authUser.email) {\n            arr.unshift({ ...resData[key], id: key })\n          }\n        }\n        console.log(\"red\")\n\n        setOrders(arr)\n      } catch (error) {\n        console.log(error)\n      }\n    }\n    getData()\n  },[authUser])\n  const userSignOut = () => {\n    signOut(auth).then(() => {\n      console.log(\"Sigin Out Successfully\")\n    }).catch((error) => {\n      console.log(error)\n    })\n  }\n  return (\n    <div className='profilepage'>\n      <div className='header bg-secondary'>My Profile</div>\n      <div className=\"profilecontainer\">\n        {authUser ? (\n          <div className='profile rounded'>\n          <div className=\"imgprofile shadow\">\n            <img src=\"/icons/profile.svg\" alt=\"\" />\n          </div>\n          <div className='email'>{authUser.email}</div>\n        </div>\n        ):(null)}\n        \n        <Link to={\"/profile/orders\"} className=\"itembox mt-4\">\n          <div className=\"info\">\n            <h2>My Orders</h2>\n            <p className='mt-1'>Alredy have {orders?(orders.length):(0)} orders</p>\n          </div>\n          <div className=\"to\">\n            <img src=\"/icons/chevron_right.svg\" alt=\"\" />\n          </div>\n        </Link>\n        <Link to={\"/profile/settings\"} className=\"itembox mt-4\">\n          <div className=\"info\">\n            <h2>Settings</h2>\n            <p className='mt-1'>Password, Log Out</p>\n          </div>\n          <div className=\"to\">\n            <img src=\"/icons/chevron_right.svg\" alt=\"\" />\n          </div>\n        </Link>\n        {authUser ? (<button className='btn btn-primary mt-3 mb-5' onClick={userSignOut}>Sign Out</button>) : (null)}\n      </div>\n      <Footernavbar />\n    </div>\n  )\n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}